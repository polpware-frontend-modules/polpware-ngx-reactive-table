{"version":3,"file":"polpware-ngx-reactive-table.umd.js","sources":["ng://@polpware/ngx-reactive-table/lib/bases/ngx-datatable-powered-base.ts"],"sourcesContent":["import { Input, OnInit, TemplateRef } from '@angular/core';\nimport { ColumnMode } from '@swimlane/ngx-datatable';\n\nexport interface IComponentSettings {\n    pageSize?: number;\n}\n\nexport interface IColumnConfiguration {\n    name?: string;\n    prop?: string;\n    width?: number;\n    maxWidth?: number;\n    minWidth?: number;\n    sortable?: boolean;\n    headerTemplate?: TemplateRef<any>;\n    cellTemplate?: TemplateRef<any>;\n}\n\nexport interface ISortableColumn {\n    prop: string;\n    dir: 'asc' | 'desc';\n}\n\nexport interface ISortChangedEvent {\n    column: {\n        prop: string;\n    };\n    newValue: 'asc' | 'desc';\n}\n\nexport interface IPageChangedEvent {\n    offset: number;\n}\n\nconst defaultSettings: IComponentSettings = {\n    pageSize: 40\n}\n\nexport abstract class NgxDatatablePoweredBase<T> implements OnInit {\n\n    @Input() settings: IComponentSettings;\n\n    ColumnMode = ColumnMode;\n\n    columns: Array<IColumnConfiguration> = [];\n\n    rows: Array<T> = [];\n\n    totalCount: number = 0;\n    pageIndex: number = 0; // page index\n\n    pageSize: number = 40;\n    loading: boolean = false;\n\n    // Sorting \n    sortingKey: string = '';\n    // Describe the init sorting order.\n    sorts: Array<ISortableColumn> = [];\n\n    ngOnInit(): void {\n        const settings = Object.assign({}, defaultSettings, this.settings);\n        this.pageSize = settings.pageSize;\n    }\n\n    protected abstract buildTableDataAsync(pageIndex: number): Promise<any>;\n\n    onPageChanged(evt: IPageChangedEvent) {\n        this.buildTableDataAsync(evt.offset);\n    }\n\n    refresh() {\n        // The other settings stay the same.\n        this.buildTableDataAsync(0);\n    }\n\n    abstract onSortChanged(evt: ISortChangedEvent): any;\n}\n"],"names":["ColumnMode"],"mappings":";;;;;;IAkCA,IAAM,eAAe,GAAuB;QACxC,QAAQ,EAAE,EAAE;KACf,CAAA;;QAED;YAII,eAAU,GAAGA,uBAAU,CAAC;YAExB,YAAO,GAAgC,EAAE,CAAC;YAE1C,SAAI,GAAa,EAAE,CAAC;YAEpB,eAAU,GAAW,CAAC,CAAC;YACvB,cAAS,GAAW,CAAC,CAAC;YAEtB,aAAQ,GAAW,EAAE,CAAC;YACtB,YAAO,GAAY,KAAK,CAAC;;YAGzB,eAAU,GAAW,EAAE,CAAC;;YAExB,UAAK,GAA2B,EAAE,CAAC;SAmBtC;QAjBG,0CAAQ,GAAR;YACI,IAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;SACrC;QAID,+CAAa,GAAb,UAAc,GAAsB;YAChC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;SACxC;QAED,yCAAO,GAAP;;YAEI,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;SAC/B;sGAnCiB,uBAAuB;sEAAvB,uBAAuB;sCAtC7C;KAsCA;;;;;;;;;;;;"}