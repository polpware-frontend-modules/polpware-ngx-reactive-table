{"version":3,"file":"polpware-ngx-reactive-table.js","sources":["ng://@polpware/ngx-reactive-table/lib/bases/ngx-datatable-powered-base.ts","ng://@polpware/ngx-reactive-table/public-api.ts","ng://@polpware/ngx-reactive-table/polpware-ngx-reactive-table.ts"],"sourcesContent":["import { Input, OnInit, TemplateRef } from '@angular/core';\nimport { ColumnMode } from '@swimlane/ngx-datatable';\n\nexport interface IComponentSettings {\n    pageSize?: number;\n}\n\nexport interface IColumnConfiguration {\n    name?: string;\n    prop?: string;\n    width?: number;\n    maxWidth?: number;\n    minWidth?: number;\n    sortable?: boolean;\n    headerTemplate?: TemplateRef<any>;\n    cellTemplate?: TemplateRef<any>;\n}\n\nexport interface ISortableColumn {\n    prop: string;\n    dir: 'asc' | 'desc';\n}\n\nexport interface ISortChangedEvent {\n    column: {\n        prop: string;\n    };\n    newValue: 'asc' | 'desc';\n}\n\nexport interface IPageChangedEvent {\n    offset: number;\n}\n\nconst defaultSettings: IComponentSettings = {\n    pageSize: 40\n}\n\nexport abstract class NgxDatatablePoweredBase<T> implements OnInit {\n\n    @Input() settings: IComponentSettings;\n\n    ColumnMode = ColumnMode;\n\n    columns: Array<IColumnConfiguration> = [];\n\n    rows: Array<T> = [];\n\n    totalCount: number = 0;\n    pageIndex: number = 0; // page index\n\n    pageSize: number = 40;\n    loading: boolean = false;\n\n    // Sorting \n    sortingKey: string = '';\n    // Describe the init sorting order.\n    sorts: Array<ISortableColumn> = [];\n\n    ngOnInit(): void {\n        const settings = Object.assign({}, defaultSettings, this.settings);\n        this.pageSize = settings.pageSize;\n    }\n\n    protected abstract buildTableDataAsync(pageIndex: number): Promise<any>;\n\n    onPageChanged(evt: IPageChangedEvent) {\n        this.buildTableDataAsync(evt.offset);\n    }\n\n    refresh() {\n        // The other settings stay the same.\n        this.buildTableDataAsync(0);\n    }\n\n    abstract onSortChanged(evt: ISortChangedEvent): any;\n}\n","/*\n * Public API Surface of ngx-reactive-table\n */\n\nexport * from './lib/bases/ngx-datatable-powered-base';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;AAkCA,MAAM,eAAe,GAAuB;IACxC,QAAQ,EAAE,EAAE;CACf,CAAA;MAEqB,uBAAuB;IAA7C;QAII,eAAU,GAAG,UAAU,CAAC;QAExB,YAAO,GAAgC,EAAE,CAAC;QAE1C,SAAI,GAAa,EAAE,CAAC;QAEpB,eAAU,GAAW,CAAC,CAAC;QACvB,cAAS,GAAW,CAAC,CAAC;QAEtB,aAAQ,GAAW,EAAE,CAAC;QACtB,YAAO,GAAY,KAAK,CAAC;;QAGzB,eAAU,GAAW,EAAE,CAAC;;QAExB,UAAK,GAA2B,EAAE,CAAC;KAmBtC;IAjBG,QAAQ;QACJ,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;KACrC;IAID,aAAa,CAAC,GAAsB;QAChC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;KACxC;IAED,OAAO;;QAEH,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;KAC/B;;8FAnCiB,uBAAuB;yDAAvB,uBAAuB;;ACtC7C;;;;ACAA;;;;;;"}